var L=Object.create;var u=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var Y=Object.getPrototypeOf,z=Object.prototype.hasOwnProperty;var o=(t,e)=>()=>(t&&(e=t(t=0)),e);var y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var b=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of B(e))!z.call(t,s)&&s!==r&&u(t,s,{get:()=>e[s],enumerable:!(n=q(e,s))||n.enumerable});return t};var w=(t,e,r)=>(r=t!=null?L(Y(t)):{},b(e||!t||!t.__esModule?u(r,"default",{value:t,enumerable:!0}):r,t)),J=t=>b(u({},"__esModule",{value:!0}),t);var x=o(()=>{});var _=o(()=>{x()});function a(t){return(...e)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...e);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var l=o(()=>{});var C=o(()=>{});var A=o(()=>{});var p=o(()=>{C();A()});var O=o(()=>{p()});var S=o(()=>{p();O()});var E,P=o(()=>{_();l();S();E=a("manifest")});var k=y((At,N)=>{l();N.exports=a("vendor")().React});var W=y((Ot,I)=>{l();I.exports=a("NeosProjectPackages")().ReactUiComponents});var T=o(()=>{});async function v(t,e,r="GET"){return e&&r==="GET"&&(t=Object.keys(e).reduce((n,s)=>n+"&"+s+"="+encodeURIComponent(e[s]),t+"?")),fetch(t,{method:r,credentials:"include",body:e&&r==="POST"?JSON.stringify(e):void 0,headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(n=>{if(n.status!==200)throw new Error(`The request failed with code ${n.status}: "${n.statusText}"`);return n.headers.get("Content-Type")?.includes("application/json")?n.json():n.text()})}var H=o(()=>{});async function K(){return v("/neos/service/data-source/shel-neos-healthcheck-environments")}var D=o(()=>{H()});function F(...t){return t.filter(e=>typeof e=="string"||typeof e=="boolean"&&e).join(" ").trim()}var R=o(()=>{});function c(t){if(typeof t=="string")return t;if(typeof t=="number")return t.toString();if(Array.isArray(t))return`[${t.map(c).join(", ")}]`;if(typeof t=="object"&&t!==null){let e="";Object.keys(t).forEach(r=>{typeof t[r]=="object"&&t[r]!==null?t[r]=c(t[r]):typeof t[r]=="string"?t[r]=t[r].replace(/\\n/g,`
`):typeof t[r]=="number"&&(t[r]=t[r].toString()),e+=`${r}: ${t[r]}
`}),t=e.trim()}return String(t)}var V=o(()=>{});var i,U,h,$=o(()=>{i=w(k()),U=w(W());T();D();R();V();h=class extends i.PureComponent{constructor(){super(...arguments);this.state={loading:!0,environments:{}}}componentDidMount(){K().then(({success:r,message:n,environments:s})=>{r||console.warn("Could not load application environments:",n),this.setState({loading:!1,environments:s})}).catch(r=>{this.setState({loading:!1})})}render(){let{environments:r}=this.state;return r&&Object.keys(r).length>0?i.default.createElement("div",{className:"health-check"},Object.keys(r).filter(n=>r[n].data.status!=="unavailable").sort((n,s)=>r[n].isCurrent?-1:1).map(n=>{let{label:s,icon:d,isCurrent:G,data:m}=r[n];return i.default.createElement("details",{className:F("health-check__item",G&&"health-check__item--current"),name:"health-check__items",key:s},i.default.createElement("summary",null,d?i.default.createElement(U.Icon,{icon:d,padded:"right"}):"",s),i.default.createElement("table",null,Object.keys(m).map(f=>{let g=c(m[f]);return i.default.createElement("tr",{key:f},i.default.createElement("td",null,f.charAt(0).toUpperCase()+f.slice(1)),i.default.createElement("td",null,i.default.createElement("pre",{title:g},g)))})))})):null}}});var X={};var M=o(()=>{P();$();E("Shel.Neos.HealthCheck:Plugin",{},t=>{t.get("containers").set("PrimaryToolbar/Left/Shel.Neos.HealthCheck.View",h)})});M();
//# sourceMappingURL=Plugin.js.map
